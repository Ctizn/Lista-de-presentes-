<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lista de Presentes Interativa</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Lista de Presentes</h1>
    <div class="controls">
      <input id="search" class="search" placeholder="Buscar presentes...">
      <select id="sort" class="search" title="Ordenar">
        <option value="default">Ordenar: Padrão</option>
        <option value="price-asc">Menor preço</option>
        <option value="price-desc">Maior preço</option>
        <option value="name">Nome</option>
      </select>
    </div>
  </header>

  <main>
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <img id="modalImg" src="" alt="">
      <div class="body">
        <strong id="modalTitle"></strong>
        <p id="modalPrice"></p>
        <div style="margin-top:8px">
          <a id="modalLink" class="link-btn primary" href="#" target="_blank" rel="noopener">Ver no site</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    const products = [
      {id:1,title:'Fone Bluetooth Over-Ear',price:199.90,img:'https://images.unsplash.com/photo-1518444022248-8c7e1a3a3b4f?q=80',url:'https://www.example.com/produto1'},
      {id:2,title:'Relógio Minimalista',price:349.00,img:'https://images.unsplash.com/photo-1519744792095-2f2205e87b6f?q=80',url:'https://www.example.com/produto2'},
      {id:3,title:'Kit de Churrasco',price:129.50,img:'https://images.unsplash.com/photo-1551782450-a2132b4ba21d?q=80',url:'https://www.example.com/produto3'},
      {id:4,title:'Livro: Poemas e Natureza',price:49.90,img:'https://images.unsplash.com/photo-1512820790803-83ca734da794?q=80',url:'https://www.example.com/produto4'},
      {id:5,title:'Vela Aromática Premium',price:39.90,img:'https://images.unsplash.com/photo-1509228627154-6452a8b280c9?q=80',url:'https://www.example.com/produto5'},
      {id:6,title:'Mochila Urbana',price:259.00,img:'https://images.unsplash.com/photo-1520975927409-6d9b1a3a6a0d?q=80',url:'https://www.example.com/produto6'}
    ];

    const grid = document.getElementById('grid');
    const searchInput = document.getElementById('search');
    const sortSelect = document.getElementById('sort');

    function formatPrice(p){
      return p.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    }

    function renderList(list){
      grid.innerHTML = '';
      list.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb">
            <img loading="lazy" src="${p.img}" alt="${p.title}">
          </div>
          <div class="btn-row">
            <a class="link-btn primary" href="${p.url}" target="_blank" rel="noopener">Ir para o produto</a>
            <button class="link-btn secondary" data-id="${p.id}">Visualizar</button>
          </div>
          <div class="meta">
            <div class="title">${p.title}</div>
            <div class="price">${formatPrice(p.price)}</div>
          </div>
        `;
        card.querySelector('button[data-id]').addEventListener('click',()=>openModal(p));
        grid.appendChild(card);
      });
    }

    function applyFilters(){
      const q = searchInput.value.trim().toLowerCase();
      let out = products.filter(p=>p.title.toLowerCase().includes(q));

      const sort = sortSelect.value;
      if(sort==='price-asc') out.sort((a,b)=>a.price-b.price);
      else if(sort==='price-desc') out.sort((a,b)=>b.price-a.price);
      else if(sort==='name') out.sort((a,b)=>a.title.localeCompare(b.title));

      renderList(out);
    }

    searchInput.addEventListener('input',applyFilters);
    sortSelect.addEventListener('change',applyFilters);

    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalPrice = document.getElementById('modalPrice');
    const modalLink = document.getElementById('modalLink');

    function openModal(product){
      modalImg.src = product.img;
      modalImg.alt = product.title;
      modalTitle.textContent = product.title;
      modalPrice.textContent = formatPrice(product.price);
      modalLink.href = product.url;
      modalBackdrop.style.display = 'flex';
    }

    modalBackdrop.addEventListener('click',e=>{
      if(e.target===modalBackdrop) modalBackdrop.style.display='none';
    });

    renderList(products);
  </script>
</body>
</html>
